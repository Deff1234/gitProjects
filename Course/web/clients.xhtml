<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head>
</h:head>
<h:body>
    <h:outputStylesheet library="css" name="styles.css"/>
    <p:tabMenu activeIndex="#{param.i}">
        <p:menuitem value="Главное меню" url="mainMenu.xhtml?i=0">
            <f:param name="i" value="0"/>
        </p:menuitem>
        <p:menuitem value="Клиенты" url="clients.xhtml?i=1">
            <f:param name="i" value="1"/>
        </p:menuitem>
        <p:menuitem value="Автомобили" url="cars.xhtml?i=2">
            <f:param name="i" value="2"/>
        </p:menuitem>
        <p:menuitem value="Технические данные" url="technicalData.xhtml?i=3">
            <f:param name="i" value="3"/>
        </p:menuitem>
    </p:tabMenu>

    <p:separator/>

    <h:form id="form1">
        <p:dataTable id="clients" value="#{client.messages}" var="c" resizableColumns="true" paginator="true" rows="10"
                     rowsPerPageTemplate="5,10,15" styleClass="ui-corner-top">
                <f:facet name="header">
                    Клиенты
                    <p:commandButton value="Добавить клиента" style="float:left;"/>
                </f:facet>
            <p:column style="width: 20px">
                <h:commandLink
                        actionListener="#{clientsBean.editClient}">
                    <f:param name="clientId" value="#{c.clientId}"/>
                    <p:graphicImage id="editGI"
                                    value="resources/images/edit.png"
                                    width="20"
                                    height="20">
                    </p:graphicImage>
                </h:commandLink>
            </p:column>
            <p:column style="width: 20px">
                <p:commandLink actionListener="#{clientsBean.deleteClientConfirm}" update="form1">
                    <f:param name="clientId" value="#{c.clientId}"/>
                    <p:confirm header="Подтверждение!" message="Вы уверены что хотите удалить клиента?"
                               icon="ui-icon-alert"/>
                    <p:graphicImage id="deleteGI"
                                    value="resources/images/delete.png"
                                    width="20"
                                    height="20">
                    </p:graphicImage>
                </p:commandLink>
                <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                    <p:commandButton value="Да" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>
                    <p:commandButton value="Нет" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"/>
                </p:confirmDialog>
            </p:column>
            <p:column headerText="Код клиента" style="width: 100px">
                <h:outputText value="#{c.clientId}"/>
            </p:column>
            <p:column headerText="ФИО клиента">
                <h:outputText value="#{c.FIO}"/>
            </p:column>
            <p:column headerText="Паспортные данные">
                <h:outputText value="#{c.passData}"/>
            </p:column>
            <p:column headerText="Адрес">
                <h:outputText value="#{c.homeAddress}"/>
            </p:column>
            <p:column headerText="Телефон">
                <h:outputText value="#{c.phone}"/>
            </p:column>
            <p:column headerText="Доставка" style="width: 100px">
                <h:outputText value="#{c.delivery}"/>
            </p:column>
            <p:column headerText="Способ оплаты">
                <h:outputText value="#{c.typeOfPayment}"/>
            </p:column>
        </p:dataTable>
    </h:form>

    <p:dialog header="Редактирование" widgetVar="clientEditDialogVar" minHeight="40" id="clientEditDialogId"
              modal="true">
        <h:form>
            <h:panelGrid columns="2" cellspacing="5">
                <p:outputLabel value="Ид клиента:"/>
                <p:outputLabel value="#{clientsBean.currentClient.clientId}"/>

                <p:outputLabel value="ФИО клиента:"/>
                <p:inputText value="#{clientsBean.currentClient.FIO}"/>

                <p:outputLabel value="Паспортные данные:"/>
                <p:inputText value="#{clientsBean.currentClient.passData}"/>

                <p:outputLabel value="Адрес:"/>
                <p:inputText value="#{clientsBean.currentClient.homeAddress}"/>

                <p:outputLabel value="Телефон:"/>
                <p:inputText value="#{clientsBean.currentClient.phone}"/>

                <p:outputLabel value="Доставка:"/>
                <p:selectOneMenu id="som1" value="#{clientsBean.currentClient.delivery}">
                    <f:selectItem itemLabel="Да" itemValue="#{1}"/>
                    <f:selectItem itemLabel="Нет" itemValue="#{0}"/>
                </p:selectOneMenu>

                <p:outputLabel value="Способ оплаты:"/>
                <p:selectOneMenu id="som2" value="#{clientsBean.currentClient.typeOfPayment}">
                    <f:selectItem itemLabel="Наличный" itemValue="Наличный"/>
                    <f:selectItem itemLabel="Безналичный" itemValue="Безналичный"/>
                </p:selectOneMenu>

                <p:commandButton value="Сохранить" id="cb1" action="#{clientsBean.editClientConfirm}"
                                 style="left: 280px" update="form1"/>
            </h:panelGrid>
        </h:form>
    </p:dialog>
</h:body>
</html>
